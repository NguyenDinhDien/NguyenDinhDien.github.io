import{d as j,u as B,a as I,r as k,b as v,o as h,c as S,e as o,f as a,w as r,t as p,g as s,h as M,i as X,j as Y,F as U,k as C,l as ee,m as N,_ as se,n as oe,p as te,q as ae,s as q,v as J,x as K,y as D,z as T,A,B as L,C as ne,D as le,E as ie}from"./index-fae5d1f2.js";import{u as Z}from"./profile-6ebe56f0.js";import{c as ce,a as z,b as re,u as de,d as H,f as _e,_ as ue}from"./Csv-Logo-c3918734.js";import{e as V,_ as Q}from"./successNotification.vue_vue_type_script_setup_true_lang-8de7b1c0.js";import{g as me}from"./common-98ce730a.js";import{u as pe,O as G,R as ve,a as E}from"./page.constant-c4856d42.js";import{_ as F}from"./_plugin-vue_export-helper-c27b6911.js";import"./validators-4c406939.js";const he="/assets/Menu-Fries-816934bf.svg",ge="/assets/cloud-change-192dc830.svg",fe="/assets/export-9ea0aa00.svg",be={id:"changePasswordModel",class:"rounded-lg"},we={class:"block text-gray-700 text-sm font-bold ml-0",for:"password"},ye={class:"block text-gray-700 text-sm font-bold ml-0 mt-6",for:"password"},xe={class:"text-center items-center mt-6 mb-2"},Se=j({__name:"changePasswordModel",setup(b){const g=B(),{t:l}=I(),u=g.getUser(),t=k(!1),_=ce().shape({password:z().required().min(8).max(128).matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[\^\$\*\.\[\]\{\}\(\)\?\"\!\@\#\%\&\/\\\,\>\<\'\:\;\|\_\~\`]).*$/,l("common.password_schema_warning")),confirmPassword:z().oneOf([re("password")],l("common.password_match_check"))}),{handleSubmit:d}=de({validationSchema:_}),w=H("password",_),m=H("confirmPassword",_),i=d(async y=>{await g.changePassword(u.user_id,y.password,l)}),P=()=>{V.emit("closeDialog")};return(y,e)=>{const c=v("v-card-title"),f=v("v-text-field"),R=v("v-btn");return h(),S("div",be,[o("form",{class:"form-login",onSubmit:e[6]||(e[6]=X((...$)=>s(i)&&s(i)(...$),["prevent"]))},[a(c,{class:"title-change_password font-bold px-0"},{default:r(()=>[o("span",null,p(s(l)("common.change_password")),1)]),_:1}),o("label",we,p(s(l)("common.password_new")),1),a(f,{placeholder:"••••••••",type:t.value?"text":"password",modelValue:s(w).value.value,"onUpdate:modelValue":e[0]||(e[0]=$=>s(w).value.value=$),"error-messages":s(w).errorMessage.value,"append-inner-icon":t.value?"mdi-eye":"mdi-eye-off",onMousedown:e[1]||(e[1]=()=>t.value=!0),onMouseup:e[2]||(e[2]=()=>t.value=!1)},null,8,["type","modelValue","error-messages","append-inner-icon"]),o("label",ye,p(s(l)("common.password_confirm")),1),a(f,{placeholder:"••••••••",type:t.value?"text":"password",modelValue:s(m).value.value,"onUpdate:modelValue":e[3]||(e[3]=$=>s(m).value.value=$),"error-messages":s(m).errorMessage.value,"append-inner-icon":t.value?"mdi-eye":"mdi-eye-off",onMousedown:e[4]||(e[4]=()=>t.value=!0),onMouseup:e[5]||(e[5]=()=>t.value=!1)},null,8,["type","modelValue","error-messages","append-inner-icon"]),o("div",xe,[a(R,{class:"rounded-lg bg-white hover:bg-gray-100 text-gray-800 font-semibold mx-2 py-2 px-6 border border-gray-400 rounded shadow",color:"white",onClick:P},{default:r(()=>[M(p(s(l)("common.cancel")),1)]),_:1}),a(R,{class:"rounded-lg hover:bg-gray-100 text-gray-800 font-semibold mx-2 py-2 px-6 border border-gray-400 rounded shadow text-white",color:"#277ffe",type:"submit"},{default:r(()=>[M(p(s(l)("common.agree")),1)]),_:1})])],32)])}}});const ke=j({__name:"DataSynchronization",setup(b,{emit:g}){const{t:l}=I(),u=Z(),t=pe();let _=u.getUser(),d=k(!1);const w=()=>{V.emit("show-loading"),u.syncUserProfileHRG(_.user_id,l).then(m=>{m.status==200&&(d.value=!0,C.currentRoute.value.name==="profile"&&u.getProfileById(_.user_id,_.role,G,l).then(i=>{V.emit("reloadProfile",i)}),C.currentRoute.value.name==="home"&&t.getHomeProject(_.user_id,ve,G,l).then(i=>{V.emit("reloadProjectTab",i)}))}).catch(m=>{console.error(m)}).finally(async()=>{V.emit("hide-loading"),await new Promise(m=>setTimeout(m,3e3)),d.value=!1})};return(m,i)=>{const P=v("v-dialog");return h(),S(U,null,[o("span",{onClick:w},p(s(l)("common.reload_profile_info")),1),a(P,{modelValue:s(d),"onUpdate:modelValue":i[0]||(i[0]=y=>Y(d)?d.value=y:d=y),width:"350px"},{default:r(()=>[a(Q)]),_:1},8,["modelValue"])],64)}}}),W=b=>(q("data-v-1fbd0bca"),b=b(),J(),b),Ve={class:"header-style"},$e={class:"left-header"},Re={class:"header-text"},Pe={class:"right-header"},Ee={class:"flag-box"},Me={class:"avatar-box"},Oe=["src"],Ue={class:"list-option-item"},Le={class:"list-option-item"},Ce=W(()=>o("img",{src:ge,alt:"{{ t('common.change_password') }}"},null,-1)),je={class:"list-option-item"},Ie=W(()=>o("img",{src:fe,alt:"{{ t('common.sign_out') }}"},null,-1)),De="change_pwd_success_notifidation",Ae=j({__name:"header",setup(b){const{t:g}=I(),l=B();Z();const u=ee();N(()=>u.meta.title),k(!1),Object.fromEntries(Object.entries(Object.assign({"../../plugins/i18n/locales/en.json":se,"../../plugins/i18n/locales/jp.json":oe,"../../plugins/i18n/locales/vi.json":te})).map(([e,c])=>[e.slice(10,-5),c.default]));const t=k(!1),_=()=>{t.value=!0};V.on("closeDialog",()=>{t.value=!1});const d=k(!0),w=()=>{d.value=!d.value,V.emit("sidebar-toggle",d.value)},m=N(()=>l.changePwdSuccessVisible);ae(m,async(e,c)=>{t.value=!1,await new Promise(f=>setTimeout(f,3e3)),l.logout()});const i=l.getUser(),P=i!=null&&i.full_name?i.full_name:"",y=k("");return me(i==null?void 0:i.user_file,i==null?void 0:i.gender,!0).then(e=>y.value=e),(e,c)=>{const f=v("v-icon"),R=v("v-list-item"),$=v("v-list"),n=v("v-menu"),x=v("v-dialog");return h(),S("div",Ve,[o("div",$e,[o("img",{class:"header-bars-btn",src:he,alt:"",onClick:w}),o("span",Re,p(s(g)("common.hello")+s(P)),1)]),o("div",Pe,[o("div",Ee,[a(_e)]),o("div",Me,[o("img",{class:"avatar-img",src:y.value,alt:""},null,8,Oe),a(n,{activator:"parent",location:"bottom"},{default:r(()=>[a($,null,{default:r(()=>[a(R,null,{default:r(()=>[o("div",Ue,[a(f,null,{default:r(()=>[M("mdi-file-sync")]),_:1}),a(ke)])]),_:1}),a(R,{onClick:c[0]||(c[0]=O=>_())},{default:r(()=>[o("div",Le,[Ce,o("span",null,p(s(g)("common.change_password")),1)])]),_:1}),a(R,{onClick:c[1]||(c[1]=O=>s(l).logout())},{default:r(()=>[o("div",je,[Ie,o("span",null,p(s(g)("common.sign_out")),1)])]),_:1})]),_:1})]),_:1})]),a(x,{modelValue:t.value,"onUpdate:modelValue":c[2]||(c[2]=O=>t.value=O),width:"400px"},{default:r(()=>[a(Se,{dialogVisible:t.value},null,8,["dialogVisible"])]),_:1},8,["modelValue"]),a(x,{modelValue:s(l).changePwdSuccessVisible,"onUpdate:modelValue":c[3]||(c[3]=O=>s(l).changePwdSuccessVisible=O),width:"350px"},{default:r(()=>[a(Q,{message:De})]),_:1},8,["modelValue"])])])}}});const Be=F(Ae,[["__scopeId","data-v-1fbd0bca"]]),Fe=b=>(q("data-v-ddb7fa80"),b=b(),J(),b),Ne=Fe(()=>o("div",{class:"navbar-header"},[o("a",null,[o("img",{class:"image-logo",src:ue,alt:""})])],-1)),Te={class:"main for-menu-content"},ze={id:"mainmenu",class:"navigation navigation-main"},He=["onClick"],Ge={class:"item-text"},qe=["onClick"],Je={class:"item-right"},Ke={class:"item-text"},Ze={key:2,class:"submenu pl-0"},Qe=["onClick"],We={class:"sub-item-text"},Xe=j({__name:"sidebar",setup(b){const{t:g}=I(),u=B().getUser(),t=u.role;let _=k([]);k([]);const d=k(null);let w=k();const m=()=>{w.value=[{label:"dashboard",icon:"mdi-view-dashboard",path:"/dashboard",role:E.ROLE_MANAGER,children:null},{label:"home",icon:"mdi-ballot",path:"/checklist",role:E.ROLE_USER,children:null},{label:"manage",icon:"mdi-cog",path:"/manage",role:E.ROLE_MANAGER,children:[{label:"category",path:"/category",icon:"mdi-chevron-right"},{label:"checklist",path:"/checklist",icon:"mdi-chevron-right"},{label:"project",path:"/project",icon:"mdi-chevron-right"},{label:"employee",path:"/employee",icon:"mdi-chevron-right"}]},{label:"profile",icon:"mdi-account",path:"/profile",role:E.ROLE_USER,children:null}]};K(()=>{m()});function i(e,c,f){return f?(c!==null?C.push(c):C.push(e.path),"active-menu"):""}function P(e){_.value.includes(e)?_.value=_.value.filter(c=>c!==e):_.value.push(e)}function y(e,c){if(u.role==E.ROLE_USER){if(e==u.role)return!0}else if(u.role<E.ROLE_USER&&(e>=u.role||e==E.ROLE_USER))return!0;return!1}return(e,c)=>{const f=v("v-icon"),R=v("nuxt-link"),$=v("v-navigation-drawer");return h(),D($,{class:"nav-bar-menu",app:"app"},{default:r(()=>[Ne,o("div",Te,[o("ul",ze,[(h(!0),S(U,null,T(s(w),n=>(h(),S(U,null,[n.children==null&&y(n.role,s(t))?(h(),S("li",{class:A(["item",i(n,null,d.value==n.path)]),key:n.path,onClick:x=>d.value=n.path},[a(f,{class:"item-icon"},{default:r(()=>[M(p(n.icon),1)]),_:2},1024),o("span",Ge,p(s(g)("common."+n.label)),1)],10,He)):L("",!0),n.children&&y(n.role,s(t))?(h(),S("li",{key:1,class:"item",onClick:x=>P(n.path)},[a(f,{class:"item-icon"},{default:r(()=>[M(p(n.icon),1)]),_:2},1024),o("div",Je,[o("span",Ke,p(s(g)("common."+n.label)),1),(h(),D(f,{class:"icon-right",key:n.path},{default:r(()=>[M("mdi-chevron-down")]),_:2},1024))])],8,qe)):L("",!0),n.children&&y(n.role,s(t))?ne((h(),S("ul",Ze,[(h(!0),S(U,null,T(n.children,x=>(h(),S("li",{class:A(["sub-item",i(n,n.path+x.path,d.value==n.path+x.path)]),key:n.path+x.path,onClick:O=>d.value=n.path+x.path},[a(R,{to:n.path+x.path},{default:r(()=>[a(f,{class:"sub-item-icon"},{default:r(()=>[M(p(x.icon),1)]),_:2},1024),o("span",We,p(s(g)("common."+x.label)),1)]),_:2},1032,["to"])],10,Qe))),128))],512)),[[le,s(_).includes(n.path)]]):L("",!0)],64))),256))])])]),_:1})}}});const Ye=F(Xe,[["__scopeId","data-v-ddb7fa80"]]);const es={id:"layout_default"},ss={__name:"default",setup(b){const g=ie.useLoading({}),l=k(!0);K(()=>{V.on("sidebar-toggle",t=>{l.value=t})});let u=null;return V.on("show-loading",t=>{u=g.show({})}),V.on("hide-loading",t=>{u.hide()}),(t,_)=>{const d=v("router-view"),w=v("v-main"),m=v("v-app");return h(),S("div",es,[a(m,{class:"color-main",id:"inspire"},{default:r(()=>[l.value?(h(),D(Ye,{key:0})):L("",!0),a(w,{class:A([t.activeMenuContainer,{"expand-header":!l.value}])},{default:r(()=>[a(Be,{class:"test"}),a(d)]),_:1},8,["class"])]),_:1})])}}},ds=F(ss,[["__scopeId","data-v-f263300d"]]);export{ds as default};
