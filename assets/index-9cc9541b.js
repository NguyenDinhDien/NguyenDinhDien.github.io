import{e as U,_ as te}from"./successNotification.vue_vue_type_script_setup_true_lang-8de7b1c0.js";import{G,P as ae,Q as oe,R as le,S as ne,d as F,b as I,o as i,c as h,z as R,A as B,e,t as v,C as q,T as N,F as L,B as E,f as C,w as b,h as A,y as O,L as se,M,a as z,r as k,x as X,g as _,j as Y,s as ce,v as ie,U as de,m as H}from"./index-fae5d1f2.js";import{M as W}from"./messageDialog-908c7e4b.js";import{i as J}from"./validators-4c406939.js";import{_ as K}from"./_plugin-vue_export-helper-c27b6911.js";const P={getCategorylList:()=>G.get(ae),getCategoryDetailList:s=>G.get(oe,{params:{category_id:s}}),putCategoryDelflgByCategoryId:(s,t)=>G.put(le,{category_id:s,del_flg:t}),postCategoryAndDetail:s=>G.post(ne,s)},re={class:"index",rowspan:"2"},_e={class:"category_detail_name_jp"},ue=["onUpdate:modelValue","disabled","placeholder"],ge={class:"confirmation_method_jp",rowspan:"2"},me=["onClick"],ye=["method_id"],pe=e("br",null,null,-1),ve={key:0,class:"option"},fe=["onClick"],he=e("br",null,null,-1),Ce={class:"confirmation_standard_jp"},De=["onUpdate:modelValue","disabled","placeholder"],we={class:"dialog-content-icon",rowspan:"2"},be=["onUpdate:modelValue","disabled","placeholder"],ke=["onUpdate:modelValue","disabled","placeholder"],Ve=F({__name:"dialogContent",props:{categoryDetail:{type:Object,required:!0},inputError:{type:Boolean,required:!0}},setup(s){const t=s;function d(n){for(let u=0;u<t.categoryDetail.category_detail.length;u++)n!==u&&(t.categoryDetail.category_detail[u].showOptions=!1);t.categoryDetail.category_detail[n].showOptions=!t.categoryDetail.category_detail[n].showOptions}function m(n,u){t.categoryDetail.category_detail[n].method_id=u,t.categoryDetail.category_detail[n].showOptions=!1}document.addEventListener("click",f);function f(n){const u=document.querySelectorAll(".combobox"),g=document.querySelectorAll(".option");let a=!1,V=!1;for(const l of u)if(l.contains(n.target)){a=!0;break}for(const l of g)if(l.contains(n.target)){V=!0;break}if(!a&&!V&&t.categoryDetail.category_detail)for(const l of t.categoryDetail.category_detail)l.showOptions=!1}function j(n,u){if(!t.categoryDetail.category_detail[u].category_detail_id)t.categoryDetail.category_detail.splice(u,1);else{const g=t.categoryDetail.category_detail.find(a=>a.category_detail_id===n);(g==null?void 0:g.del_flg)==0&&g?t.categoryDetail.category_detail[u].del_flg=1:t.categoryDetail.category_detail[u].del_flg=0}}return(n,u)=>{const g=I("v-icon");return i(!0),h(L,null,R(t.categoryDetail.category_detail,(a,V)=>(i(),h("table",{class:B(["dialog-content",[a.del_flg===1?"opacity-delete":""]])},[e("tr",null,[e("td",re,v(V+1)+". ",1),e("td",_e,[q(e("textarea",{id:"category_detail_name_jp",rows:"2","onUpdate:modelValue":l=>a.category_detail_name_jp=l,disabled:a.del_flg==1,placeholder:a.del_flg===1?"":"あなたの質問"},`\r
                `,8,ue),[[N,a.category_detail_name_jp]])]),e("td",ge,[e("div",{class:"combobox",onClick:l=>d(V)},[(i(!0),h(L,null,R(s.categoryDetail.method_info,l=>(i(),h("div",null,[a.method_id===l.method_id?(i(),h("div",{key:0,method_id:a.method_id},[e("span",null,v(l.confirmation_method_jp),1),pe,e("span",null,v(l.confirmation_method_vn),1)],8,ye)):E("",!0)]))),256)),C(g,{class:"opacity-icon"},{default:b(()=>[A("mdi-chevron-down")]),_:1})],8,me),a.showOptions&&!a.del_flg?(i(),h("ul",ve,[(i(!0),h(L,null,R(s.categoryDetail.method_info,l=>(i(),h("li",{onClick:r=>m(V,l.method_id)},[e("span",null,v(l.confirmation_method_jp),1),he,e("span",null,v(l.confirmation_method_vn),1)],8,fe))),256))])):E("",!0)]),e("td",Ce,[q(e("textarea",{id:"confirmation_standard_jp",rows:"2","onUpdate:modelValue":l=>a.confirmation_standard_jp=l,disabled:a.del_flg==1,placeholder:a.del_flg===1?"":`〇：貸与品の扱いには十分に注意している
×：貸与品の扱いには十分に注意していない。あるいは、紛失した。`},null,8,De),[[N,a.confirmation_standard_jp]])]),e("td",we,[a.del_flg===1?(i(),O(g,{key:0,class:"icon icon-color-red",onClick:l=>j(a.category_detail_id,V)},{default:b(()=>[A("mdi-restore")]),_:2},1032,["onClick"])):(i(),O(g,{key:1,class:"icon icon-color-red",onClick:l=>j(a.category_detail_id,V)},{default:b(()=>[A("mdi-trash-can-outline")]),_:2},1032,["onClick"]))])]),e("tr",null,[e("td",null,[q(e("textarea",{id:"category_detail_name_vn",rows:"2","onUpdate:modelValue":l=>a.category_detail_name_vn=l,disabled:a.del_flg==1,placeholder:a.del_flg===1?"":"Câu hỏi của bạn"},null,8,be),[[N,a.category_detail_name_vn]])]),e("td",null,[q(e("textarea",{id:"confirmation_standard_vn",rows:"2","onUpdate:modelValue":l=>a.confirmation_standard_vn=l,disabled:a.del_flg==1,placeholder:a.del_flg===1?"":`〇：Luôn chú ý khi sử dụng
×：Không chú ý khi sử dụng hoặc làm mất`},null,8,ke),[[N,a.confirmation_standard_vn]])])])],2))),256)}}});const Q=se("category",{actions:{async getCategory(s){try{return await P.getCategorylList()}catch(t){M(t)}},async getCategoryDetail(s,t){try{return await P.getCategoryDetailList(s)}catch(d){M(d)}},async putCategoryDelflg(s,t,d){try{return await P.putCategoryDelflgByCategoryId(s,t)}catch(m){M(m)}},async postCategoryAndDetail(s,t){try{return await P.postCategoryAndDetail(s)}catch(d){M(d)}}}}),$e=s=>(ce("data-v-1fa08151"),s=s(),ie(),s),je={class:"dialog"},Ie={class:"dialog-header"},xe=["placeholder"],Ee=["placeholder"],Le={class:"dialog-title dialog-content"},Ae={class:"dialog-title_name"},Se=$e(()=>e("td",{class:"index"},null,-1)),Ue={class:"category_detail_name_jp"},Oe={class:"confirmation_method_jp"},Te={class:"confirmation_standard_jp"},Be={class:"dialog-content-icon"},qe={class:"dialog-body"},Ne={class:"dialog-footer"},Re=F({__name:"dialog",props:{closeDialog:{type:Function,required:!0},categoryItem:{type:Object,required:!0}},setup(s){const{t}=z(),d=s,m=J(d.categoryItem)?k(null):k(d.categoryItem.category_name_vn),f=J(d.categoryItem)?k(null):k(d.categoryItem.category_name_jp);X(()=>{var c;U.emit("show-loading"),d.categoryItem.category_id?S(d.categoryItem.category_id):S(0),((c=r.value)==null?void 0:c.category_detail.length)==0&&p()});const j=k(!1),n=()=>{j.value=!0},u=()=>{j.value=!1,d.closeDialog()},g=k(!1),a=k(!1),V=()=>{if(!f.value||!m.value){g.value=!0;return}a.value=!0},l=()=>{a.value=!1,o()};U.on("closeDialog",()=>{j.value=!1,a.value=!1});const r=k(),$=Q(),S=async c=>{await $.getCategoryDetail(c,t).then(y=>{r.value=y.data.data,r.value.category_detail=J(r.value.category_detail)?[{category_id:0,category_name_vn:null,category_name_jp:null,category_name_en:null,category_detail_id:0,category_detail_name_vn:null,category_detail_name_jp:null,category_detail_name_en:null,method_id:1,confirmation_standard_vn:null,confirmation_standard_en:null,confirmation_standard_jp:null,del_flg:0,showOptions:!1}]:r.value.category_detail}).catch(y=>{console.log(y)}).finally(()=>{U.emit("hide-loading")})};function p(){const c={category_id:0,category_name_vn:"",category_name_jp:"",category_name_en:"",category_detail_id:0,category_detail_name_vn:"",category_detail_name_jp:"",category_detail_name_en:"",method_id:1,confirmation_standard_vn:"",confirmation_standard_en:"",confirmation_standard_jp:"",del_flg:0,showOptions:!1};r.value?r.value.category_detail?r.value.category_detail.push(c):r.value.category_detail=[c]:r.value={method_info:[],category_detail:[c]}}function o(){var T,x;U.emit("show-loading");const c=[];(T=r.value)!=null&&T.category_detail&&((x=r.value)==null||x.category_detail.forEach(w=>{(w.category_detail_name_jp||w.category_detail_name_vn||w.confirmation_standard_jp||w.confirmation_standard_vn)&&c.push({category_detail_id:w.category_detail_id,category_detail_name_en:w.category_detail_name_en,category_detail_name_jp:w.category_detail_name_jp,category_detail_name_vn:w.category_detail_name_vn,category_id:w.category_id,confirmation_standard_en:w.confirmation_standard_en,confirmation_standard_jp:w.confirmation_standard_jp,confirmation_standard_vn:w.confirmation_standard_vn,del_flg:w.del_flg,method_id:w.method_id})}));const y={category:{category_id:d.categoryItem.category_id,category_name_en:f.value,category_name_jp:f.value,category_name_vn:m.value,del_flg:d.categoryItem.del_flg},category_detail:c},D=Q();D.postCategoryAndDetail(y,t).then(w=>{w.status==200&&w.data.message.error_code==""?(d.closeDialog(),D.getCategory(t).then(ee=>{U.emit("category-show-success-notification",ee.data.data)})):de.error(w.data.message.error_code)}).catch(w=>{console.log(w)}).finally(()=>{U.emit("hide-loading")})}return(c,y)=>{const D=I("v-icon"),T=I("v-dialog");return i(),h(L,null,[e("div",je,[e("div",Ie,[e("div",null,[q(e("input",{id:"category_name_jp",type:"text","onUpdate:modelValue":y[0]||(y[0]=x=>Y(f)?f.value=x:null),class:B([g.value&&!s.categoryItem.category_name_jp?"red-border":""]),placeholder:_(t)("common.name_category_placeholder")+" (Japanese)"},null,10,xe),[[N,_(f)]]),!s.categoryItem.category_name_jp&&g.value?(i(),h("span",{key:0,class:B([g.value&&!s.categoryItem.category_name_jp?"red-text":""])},v(_(t)("common.message_required_entry")),3)):E("",!0),q(e("input",{id:"category_name_jp",type:"text","onUpdate:modelValue":y[1]||(y[1]=x=>Y(m)?m.value=x:null),class:B([g.value&&!s.categoryItem.category_name_vn?"red-border":""]),placeholder:_(t)("common.name_category_placeholder")+" (Vietnamese)"},null,10,Ee),[[N,_(m)]]),!s.categoryItem.category_name_vn&&g.value?(i(),h("span",{key:1,class:B([g.value&&!s.categoryItem.category_name_vn?"red-text":""])},v(_(t)("common.message_required_entry")),3)):E("",!0)]),e("button",{onClick:y[2]||(y[2]=x=>n())},v(_(t)("common.cancel")),1)]),e("table",Le,[e("tr",Ae,[Se,e("td",Ue,[e("span",null,v(_(t)("common.test_items")),1)]),e("td",Oe,[e("span",null,v(_(t)("common.confirmation_method")),1)]),e("td",Te,[e("span",null,v(_(t)("common.confirmation_standard")),1)]),e("td",Be,[C(D,{class:"icon icon-color-red",style:{visibility:"hidden"}})])])]),e("div",qe,[r.value?(i(),O(Ve,{key:0,categoryDetail:r.value,inputError:g.value},null,8,["categoryDetail","inputError"])):E("",!0)]),e("div",Ne,[e("button",{onClick:y[3]||(y[3]=x=>p())},[C(D,null,{default:b(()=>[A("mdi-plus-box")]),_:1}),e("span",null,v(_(t)("common.add_more_question")),1)]),e("button",{onClick:V},v(_(t)("common.save")),1)])]),C(T,{modelValue:j.value,"onUpdate:modelValue":y[4]||(y[4]=x=>j.value=x),width:"30%"},{default:b(()=>[j.value?(i(),O(W,{key:0,title:"confirm",message:"message_cancel_category_tab",typeBtn:"primary",onAgreeDialog:u})):E("",!0)]),_:1},8,["modelValue"]),C(T,{modelValue:a.value,"onUpdate:modelValue":y[5]||(y[5]=x=>a.value=x),width:"30%"},{default:b(()=>[a.value?(i(),O(W,{key:0,title:"confirm",message:"message_save_category_tab",typeBtn:"primary",onAgreeDialog:l})):E("",!0)]),_:1},8,["modelValue"])],64)}}});const Z=K(Re,[["__scopeId","data-v-1fa08151"]]),Fe={class:"list-category"},Ge={class:"item-category"},Me={class:"item-category_footer"},Pe={class:"item-category_btn"},Ye={key:0},ze={key:1},Je=F({__name:"categoryContent",props:["propsFilters"],setup(s){const{t}=z(),{propsFilters:d}=s,m=Q();X(()=>{U.emit("show-loading"),j()});const f=k([]),j=()=>{m.getCategory(t).then(p=>{f.value=p.data.data}).finally(()=>{U.emit("hide-loading")})},n=k(!1);U.on("category-show-success-notification",p=>{f.value=p,n.value=!0,setTimeout(()=>{n.value=!1},2e3)});const u=H(()=>{const p=d.select.value;return p.del_flg===1?f.value.filter(o=>o.del_flg===1):p.del_flg===0?f.value.filter(o=>o.del_flg===0):f.value}),g=H(()=>{const p=l(d.search.value).trim().toLowerCase();return p?u.value.filter(o=>{const c=l(o.category_name_vn).toLowerCase().includes(p),y=l(o.category_name_jp).toLowerCase().includes(p);return c||y}):u.value});let a=k(!1),V=k();function l(p){return p.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function r(p){const o=f.value.find(c=>c.category_id===p);o&&(a.value=!0,V.value=o)}function $(p){const o=f.value.find(c=>c.category_id===p);(o==null?void 0:o.del_flg)==0&&o?m.putCategoryDelflg(o.category_id,1,t).then(c=>{c.status==200&&c.data.message.error_code==""&&(o.del_flg=1)}).catch(c=>{console.log(c)}):(o==null?void 0:o.del_flg)==1&&o&&m.putCategoryDelflg(o.category_id,0,t).then(c=>{c.status==200&&c.data.message.error_code==""&&(o.del_flg=0)}).catch(c=>{console.log(c)})}function S(){a.value=!1}return(p,o)=>{const c=I("v-icon"),y=I("v-dialog");return i(),h(L,null,[e("div",Fe,[(i(!0),h(L,null,R(g.value,D=>(i(),h("div",Ge,[e("div",{class:B(["item-category_name",[D.del_flg===1?"opacity-delete":""]])},[e("span",null,v(D.category_name_jp),1),e("span",null,v(D.category_name_vn),1)],2),e("div",Me,[e("span",null,v(D.count_category_detail_valid)+" "+v(_(t)("common.question_valid")),1),e("span",null,v(D.count_category_detail_delete)+" "+v(_(t)("common.question_deleted")),1),e("div",Pe,[D.del_flg===1?(i(),h("div",Ye,[C(c,{class:"icon icon-color-red",onClick:T=>$(D.category_id)},{default:b(()=>[A("mdi-restore")]),_:2},1032,["onClick"])])):(i(),h("div",ze,[C(c,{class:"icon icon-color-blue",onClick:T=>r(D.category_id)},{default:b(()=>[A("mdi-pencil-outline")]),_:2},1032,["onClick"]),C(c,{class:"ml-2 icon icon-color-red",onClick:T=>$(D.category_id)},{default:b(()=>[A("mdi-trash-can-outline")]),_:2},1032,["onClick"])]))])])]))),256))]),C(y,{modelValue:_(a),"onUpdate:modelValue":o[0]||(o[0]=D=>Y(a)?a.value=D:a=D),class:"relative"},{default:b(()=>[_(V)?(i(),O(Z,{key:0,closeDialog:S,categoryItem:_(V)},null,8,["categoryItem"])):E("",!0)]),_:1},8,["modelValue"]),C(y,{modelValue:n.value,"onUpdate:modelValue":o[1]||(o[1]=D=>n.value=D),width:"320px",height:"200px"},{default:b(()=>[C(te)]),_:1},8,["modelValue"])],64)}}});const Qe=K(Je,[["__scopeId","data-v-56e0b710"]]),Ke={class:"category-header"},He={class:"title"},We={class:"action"},Xe={class:"select"},Ze={class:"search"},et=["placeholder"],tt={class:"category-body"},at=F({__name:"category",props:["clickCarouselRight"],setup(s){const{t}=z(),d=k(""),m=k({state:"all",del_flg:"all"}),f=[{state:"all",del_flg:"all"},{state:"not_delete",del_flg:0},{state:"deleted",del_flg:1}];let j={select:m,search:d},n=k(!1),u=k();function g(){u.value={category_id:0,category_name_jp:"",category_name_vn:"",category_name_en:"",del_flg:0,count_category_detail_valid:0,count_category_detail_delete:0},n.value=!0}function a(){n.value=!1}function V(l){d.value=l.target.value}return(l,r)=>{const $=I("v-select"),S=I("v-icon"),p=I("v-dialog");return i(),h(L,null,[e("div",Ke,[e("div",He,[e("span",null,v(_(t)("common.category_management")),1)]),e("div",We,[e("div",Xe,[C($,{modelValue:m.value,"onUpdate:modelValue":r[0]||(r[0]=o=>m.value=o),items:f,"item-title":o=>_(t)("common."+o.state),"return-object":"","single-line":""},null,8,["modelValue","item-title"])]),e("div",Ze,[e("input",{type:"text",placeholder:_(t)("common.search"),onInput:V},null,40,et),C(S,null,{default:b(()=>[A("mdi-magnify")]),_:1})]),e("button",{class:"add",onClick:r[1]||(r[1]=o=>g())},[C(S,null,{default:b(()=>[A("mdi-plus")]),_:1}),e("span",null,v(_(t)("common.add_category")),1)])])]),e("div",tt,[C(Qe,{propsFilters:_(j)},null,8,["propsFilters"])]),C(p,{modelValue:_(n),"onUpdate:modelValue":r[2]||(r[2]=o=>Y(n)?n.value=o:n=o),class:"relative"},{default:b(()=>[_(u)?(i(),O(Z,{key:0,closeDialog:a,categoryItem:_(u)},null,8,["categoryItem"])):E("",!0)]),_:1},8,["modelValue"])],64)}}});const ot=K(at,[["__scopeId","data-v-b09af8d6"]]),lt={class:"main-content"},nt={class:"category"},st={key:0},ut=F({__name:"index",setup(s){const{t}=z(),d=k([{name:"category",view:"Category"}]),m=k(0),f=k(0);return(j,n)=>{const u=I("v-tab"),g=I("v-tabs"),a=I("v-carousel-item"),V=I("v-carousel"),l=I("v-window-item"),r=I("v-window");return i(),h(L,null,[C(g,{modelValue:m.value,"onUpdate:modelValue":n[0]||(n[0]=$=>m.value=$),id:"tabbar"},{default:b(()=>[(i(!0),h(L,null,R(d.value,$=>(i(),O(u,{value:$,class:"tab-item"},{default:b(()=>[A(v(_(t)("common."+$.name)),1)]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"]),e("div",lt,[e("div",nt,[C(r,{modelValue:m.value,"onUpdate:modelValue":n[2]||(n[2]=$=>m.value=$)},{default:b(()=>[(i(!0),h(L,null,R(d.value,$=>(i(),O(l,{key:$,value:$},{default:b(()=>[$.view==="Category"?(i(),h("div",st,[C(V,{"hide-delimiters":"",modelValue:f.value,"onUpdate:modelValue":n[1]||(n[1]=S=>f.value=S),style:{}},{default:b(()=>[C(a,null,{default:b(()=>[C(ot)]),_:1})]),_:1},8,["modelValue"])])):E("",!0)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])])],64)}}});export{ut as default};
