import{W as commonjsGlobal,K as getDefaultExportFromCjs,u as useAuthStore,d as defineComponent,a as useI18n,r as ref,b as resolveComponent,o as openBlock,c as createElementBlock,e as createBaseVNode,f as createVNode,i as withModifiers,g as unref,w as withCtx,h as createTextVNode,t as toDisplayString,s as pushScopeId,v as popScopeId}from"./index-fae5d1f2.js";import{c as create$3,a as create$6,u as useForm,d as useField,f as flagLanguage,_ as _imports_0}from"./Csv-Logo-c3918734.js";import{M as MSG_120002}from"./messages.constants-493f0f9e.js";import{_ as _export_sfc}from"./_plugin-vue_export-helper-c27b6911.js";var base64Js={};base64Js.byteLength=byteLength;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63;function getLens(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var f=t.indexOf("=");f===-1&&(f=e);var s=f===e?0:4-f%4;return[f,s]}function byteLength(t){var e=getLens(t),f=e[0],s=e[1];return(f+s)*3/4-s}function _byteLength(t,e,f){return(e+f)*3/4-f}function toByteArray(t){var e,f=getLens(t),s=f[0],v=f[1],n=new Arr(_byteLength(t,s,v)),x=0,c=v>0?s-4:s,g;for(g=0;g<c;g+=4)e=revLookup[t.charCodeAt(g)]<<18|revLookup[t.charCodeAt(g+1)]<<12|revLookup[t.charCodeAt(g+2)]<<6|revLookup[t.charCodeAt(g+3)],n[x++]=e>>16&255,n[x++]=e>>8&255,n[x++]=e&255;return v===2&&(e=revLookup[t.charCodeAt(g)]<<2|revLookup[t.charCodeAt(g+1)]>>4,n[x++]=e&255),v===1&&(e=revLookup[t.charCodeAt(g)]<<10|revLookup[t.charCodeAt(g+1)]<<4|revLookup[t.charCodeAt(g+2)]>>2,n[x++]=e>>8&255,n[x++]=e&255),n}function tripletToBase64(t){return lookup[t>>18&63]+lookup[t>>12&63]+lookup[t>>6&63]+lookup[t&63]}function encodeChunk(t,e,f){for(var s,v=[],n=e;n<f;n+=3)s=(t[n]<<16&16711680)+(t[n+1]<<8&65280)+(t[n+2]&255),v.push(tripletToBase64(s));return v.join("")}function fromByteArray(t){for(var e,f=t.length,s=f%3,v=[],n=16383,x=0,c=f-s;x<c;x+=n)v.push(encodeChunk(t,x,x+n>c?c:x+n));return s===1?(e=t[f-1],v.push(lookup[e>>2]+lookup[e<<4&63]+"==")):s===2&&(e=(t[f-2]<<8)+t[f-1],v.push(lookup[e>>10]+lookup[e>>4&63]+lookup[e<<2&63]+"=")),v.join("")}var sha256$1={exports:{}};/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.9.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */(function(module){(function(){var ERROR="input is invalid type",WINDOW=typeof window=="object",root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&typeof self=="object",NODE_JS=!root.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;NODE_JS?root=commonjsGlobal:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&!0&&module.exports,ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];(root.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(t){return Object.prototype.toString.call(t)==="[object Array]"}),ARRAY_BUFFER&&(root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(t){return typeof t=="object"&&t.buffer&&t.buffer.constructor===ArrayBuffer});var createOutputMethod=function(t,e){return function(f){return new Sha256(e,!0).update(f)[t]()}},createMethod=function(t){var e=createOutputMethod("hex",t);NODE_JS&&(e=nodeWrap(e,t)),e.create=function(){return new Sha256(t)},e.update=function(v){return e.create().update(v)};for(var f=0;f<OUTPUT_TYPES.length;++f){var s=OUTPUT_TYPES[f];e[s]=createOutputMethod(s,t)}return e},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(t){if(typeof t=="string")return crypto.createHash(algorithm).update(t,"utf8").digest("hex");if(t==null)throw new Error(ERROR);return t.constructor===ArrayBuffer&&(t=new Uint8Array(t)),Array.isArray(t)||ArrayBuffer.isView(t)||t.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(t)).digest("hex"):method(t)};return nodeMethod},createHmacOutputMethod=function(t,e){return function(f,s){return new HmacSha256(f,e,!0).update(s)[t]()}},createHmacMethod=function(t){var e=createHmacOutputMethod("hex",t);e.create=function(v){return new HmacSha256(v,t)},e.update=function(v,n){return e.create(v).update(n)};for(var f=0;f<OUTPUT_TYPES.length;++f){var s=OUTPUT_TYPES[f];e[s]=createHmacOutputMethod(s,t)}return e};function Sha256(t,e){e?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=t}Sha256.prototype.update=function(t){if(!this.finalized){var e,f=typeof t;if(f!=="string"){if(f==="object"){if(t===null)throw new Error(ERROR);if(ARRAY_BUFFER&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!Array.isArray(t)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(t)))throw new Error(ERROR)}else throw new Error(ERROR);e=!0}for(var s,v=0,n,x=t.length,c=this.blocks;v<x;){if(this.hashed&&(this.hashed=!1,c[0]=this.block,c[16]=c[1]=c[2]=c[3]=c[4]=c[5]=c[6]=c[7]=c[8]=c[9]=c[10]=c[11]=c[12]=c[13]=c[14]=c[15]=0),e)for(n=this.start;v<x&&n<64;++v)c[n>>2]|=t[v]<<SHIFT[n++&3];else for(n=this.start;v<x&&n<64;++v)s=t.charCodeAt(v),s<128?c[n>>2]|=s<<SHIFT[n++&3]:s<2048?(c[n>>2]|=(192|s>>6)<<SHIFT[n++&3],c[n>>2]|=(128|s&63)<<SHIFT[n++&3]):s<55296||s>=57344?(c[n>>2]|=(224|s>>12)<<SHIFT[n++&3],c[n>>2]|=(128|s>>6&63)<<SHIFT[n++&3],c[n>>2]|=(128|s&63)<<SHIFT[n++&3]):(s=65536+((s&1023)<<10|t.charCodeAt(++v)&1023),c[n>>2]|=(240|s>>18)<<SHIFT[n++&3],c[n>>2]|=(128|s>>12&63)<<SHIFT[n++&3],c[n>>2]|=(128|s>>6&63)<<SHIFT[n++&3],c[n>>2]|=(128|s&63)<<SHIFT[n++&3]);this.lastByteIndex=n,this.bytes+=n-this.start,n>=64?(this.block=c[16],this.start=n-64,this.hash(),this.hashed=!0):this.start=n}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex;t[16]=this.block,t[e>>2]|=EXTRA[e&3],this.block=t[16],e>=56&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var t=this.h0,e=this.h1,f=this.h2,s=this.h3,v=this.h4,n=this.h5,x=this.h6,c=this.h7,g=this.blocks,w,A,y,H,_,R,I,E,N,U,M;for(w=16;w<64;++w)_=g[w-15],A=(_>>>7|_<<25)^(_>>>18|_<<14)^_>>>3,_=g[w-2],y=(_>>>17|_<<15)^(_>>>19|_<<13)^_>>>10,g[w]=g[w-16]+A+g[w-7]+y<<0;for(M=e&f,w=0;w<64;w+=4)this.first?(this.is224?(E=300032,_=g[0]-1413257819,c=_-150054599<<0,s=_+24177077<<0):(E=704751109,_=g[0]-210244248,c=_-1521486534<<0,s=_+143694565<<0),this.first=!1):(A=(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10),y=(v>>>6|v<<26)^(v>>>11|v<<21)^(v>>>25|v<<7),E=t&e,H=E^t&f^M,I=v&n^~v&x,_=c+y+I+K[w]+g[w],R=A+H,c=s+_<<0,s=_+R<<0),A=(s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10),y=(c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7),N=s&t,H=N^s&e^E,I=c&v^~c&n,_=x+y+I+K[w+1]+g[w+1],R=A+H,x=f+_<<0,f=_+R<<0,A=(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),y=(x>>>6|x<<26)^(x>>>11|x<<21)^(x>>>25|x<<7),U=f&s,H=U^f&t^N,I=x&c^~x&v,_=n+y+I+K[w+2]+g[w+2],R=A+H,n=e+_<<0,e=_+R<<0,A=(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10),y=(n>>>6|n<<26)^(n>>>11|n<<21)^(n>>>25|n<<7),M=e&f,H=M^e&s^U,I=n&x^~n&c,_=v+y+I+K[w+3]+g[w+3],R=A+H,v=t+_<<0,t=_+R<<0;this.h0=this.h0+t<<0,this.h1=this.h1+e<<0,this.h2=this.h2+f<<0,this.h3=this.h3+s<<0,this.h4=this.h4+v<<0,this.h5=this.h5+n<<0,this.h6=this.h6+x<<0,this.h7=this.h7+c<<0},Sha256.prototype.hex=function(){this.finalize();var t=this.h0,e=this.h1,f=this.h2,s=this.h3,v=this.h4,n=this.h5,x=this.h6,c=this.h7,g=HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[t&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[e&15]+HEX_CHARS[f>>28&15]+HEX_CHARS[f>>24&15]+HEX_CHARS[f>>20&15]+HEX_CHARS[f>>16&15]+HEX_CHARS[f>>12&15]+HEX_CHARS[f>>8&15]+HEX_CHARS[f>>4&15]+HEX_CHARS[f&15]+HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>4&15]+HEX_CHARS[s&15]+HEX_CHARS[v>>28&15]+HEX_CHARS[v>>24&15]+HEX_CHARS[v>>20&15]+HEX_CHARS[v>>16&15]+HEX_CHARS[v>>12&15]+HEX_CHARS[v>>8&15]+HEX_CHARS[v>>4&15]+HEX_CHARS[v&15]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[n&15]+HEX_CHARS[x>>28&15]+HEX_CHARS[x>>24&15]+HEX_CHARS[x>>20&15]+HEX_CHARS[x>>16&15]+HEX_CHARS[x>>12&15]+HEX_CHARS[x>>8&15]+HEX_CHARS[x>>4&15]+HEX_CHARS[x&15];return this.is224||(g+=HEX_CHARS[c>>28&15]+HEX_CHARS[c>>24&15]+HEX_CHARS[c>>20&15]+HEX_CHARS[c>>16&15]+HEX_CHARS[c>>12&15]+HEX_CHARS[c>>8&15]+HEX_CHARS[c>>4&15]+HEX_CHARS[c&15]),g},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var t=this.h0,e=this.h1,f=this.h2,s=this.h3,v=this.h4,n=this.h5,x=this.h6,c=this.h7,g=[t>>24&255,t>>16&255,t>>8&255,t&255,e>>24&255,e>>16&255,e>>8&255,e&255,f>>24&255,f>>16&255,f>>8&255,f&255,s>>24&255,s>>16&255,s>>8&255,s&255,v>>24&255,v>>16&255,v>>8&255,v&255,n>>24&255,n>>16&255,n>>8&255,n&255,x>>24&255,x>>16&255,x>>8&255,x&255];return this.is224||g.push(c>>24&255,c>>16&255,c>>8&255,c&255),g},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(this.is224?28:32),e=new DataView(t);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),e.setUint32(20,this.h5),e.setUint32(24,this.h6),this.is224||e.setUint32(28,this.h7),t};function HmacSha256(t,e,f){var s,v=typeof t;if(v==="string"){var n=[],x=t.length,c=0,g;for(s=0;s<x;++s)g=t.charCodeAt(s),g<128?n[c++]=g:g<2048?(n[c++]=192|g>>6,n[c++]=128|g&63):g<55296||g>=57344?(n[c++]=224|g>>12,n[c++]=128|g>>6&63,n[c++]=128|g&63):(g=65536+((g&1023)<<10|t.charCodeAt(++s)&1023),n[c++]=240|g>>18,n[c++]=128|g>>12&63,n[c++]=128|g>>6&63,n[c++]=128|g&63);t=n}else if(v==="object"){if(t===null)throw new Error(ERROR);if(ARRAY_BUFFER&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!Array.isArray(t)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(t)))throw new Error(ERROR)}else throw new Error(ERROR);t.length>64&&(t=new Sha256(e,!0).update(t).array());var w=[],A=[];for(s=0;s<64;++s){var y=t[s]||0;w[s]=92^y,A[s]=54^y}Sha256.call(this,e,f),this.update(A),this.oKeyPad=w,this.inner=!0,this.sharedMemory=f}HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var t=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(t),Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224)})()})(sha256$1);var sha256Exports=sha256$1.exports;const sha256=getDefaultExportFromCjs(sha256Exports);if(typeof Promise>"u")throw Error("Keycloak requires an environment that supports Promises. Make sure that you include the appropriate polyfill.");function Keycloak(t){if(!(this instanceof Keycloak))throw new Error("The 'Keycloak' constructor must be invoked with 'new'.");for(var e=this,f,s=[],v,n={enable:!0,callbackList:[],interval:5},x=document.getElementsByTagName("script"),c=0;c<x.length;c++)(x[c].src.indexOf("keycloak.js")!==-1||x[c].src.indexOf("keycloak.min.js")!==-1)&&x[c].src.indexOf("version=")!==-1&&(e.iframeVersion=x[c].src.substring(x[c].src.indexOf("version=")+8).split("&")[0]);var g=!0,w=$(console.info),A=$(console.warn);e.init=function(r){if(e.didInitialize)throw new Error("A 'Keycloak' instance can only be initialized once.");e.didInitialize=!0,e.authenticated=!1,v=re();var o=["default","cordova","cordova-native"];if(r&&o.indexOf(r.adapter)>-1?f=J(r.adapter):r&&typeof r.adapter=="object"?f=r.adapter:window.Cordova||window.cordova?f=J("cordova"):f=J(),r){if(typeof r.useNonce<"u"&&(g=r.useNonce),typeof r.checkLoginIframe<"u"&&(n.enable=r.checkLoginIframe),r.checkLoginIframeInterval&&(n.interval=r.checkLoginIframeInterval),r.onLoad==="login-required"&&(e.loginRequired=!0),r.responseMode)if(r.responseMode==="query"||r.responseMode==="fragment")e.responseMode=r.responseMode;else throw"Invalid value for responseMode";if(r.flow){switch(r.flow){case"standard":e.responseType="code";break;case"implicit":e.responseType="id_token token";break;case"hybrid":e.responseType="code id_token token";break;default:throw"Invalid value for flow"}e.flow=r.flow}if(r.timeSkew!=null&&(e.timeSkew=r.timeSkew),r.redirectUri&&(e.redirectUri=r.redirectUri),r.silentCheckSsoRedirectUri&&(e.silentCheckSsoRedirectUri=r.silentCheckSsoRedirectUri),typeof r.silentCheckSsoFallback=="boolean"?e.silentCheckSsoFallback=r.silentCheckSsoFallback:e.silentCheckSsoFallback=!0,r.pkceMethod){if(r.pkceMethod!=="S256")throw"Invalid value for pkceMethod";e.pkceMethod=r.pkceMethod}typeof r.enableLogging=="boolean"?e.enableLogging=r.enableLogging:e.enableLogging=!1,typeof r.scope=="string"&&(e.scope=r.scope),typeof r.messageReceiveTimeout=="number"&&r.messageReceiveTimeout>0?e.messageReceiveTimeout=r.messageReceiveTimeout:e.messageReceiveTimeout=1e4}e.responseMode||(e.responseMode="fragment"),e.responseType||(e.responseType="code",e.flow="standard");var l=F(),h=F();h.promise.then(function(){e.onReady&&e.onReady(e.authenticated),l.setSuccess(e.authenticated)}).catch(function(m){l.setError(m)});var a=M();function p(){var m=function(b){b||(S.prompt="none"),r&&r.locale&&(S.locale=r.locale),e.login(S).then(function(){h.setSuccess()}).catch(function(T){h.setError(T)})},k=function(){var b=document.createElement("iframe"),T=e.createLoginUrl({prompt:"none",redirectUri:e.silentCheckSsoRedirectUri});b.setAttribute("src",T),b.setAttribute("sandbox","allow-scripts allow-same-origin"),b.setAttribute("title","keycloak-silent-check-sso"),b.style.display="none",document.body.appendChild(b);var L=function(C){if(!(C.origin!==window.location.origin||b.contentWindow!==C.source)){var P=X(C.data);U(P,h),document.body.removeChild(b),window.removeEventListener("message",L)}};window.addEventListener("message",L)},S={};switch(r.onLoad){case"check-sso":n.enable?D().then(function(){O().then(function(b){b?h.setSuccess():e.silentCheckSsoRedirectUri?k():m(!1)}).catch(function(b){h.setError(b)})}):e.silentCheckSsoRedirectUri?k():m(!1);break;case"login-required":m(!0);break;default:throw"Invalid value for onLoad"}}function u(){var m=X(window.location.href);if(m&&window.history.replaceState(window.history.state,null,m.newUrl),m&&m.valid)return D().then(function(){U(m,h)}).catch(function(k){h.setError(k)});r?r.token&&r.refreshToken?(B(r.token,r.refreshToken,r.idToken),n.enable?D().then(function(){O().then(function(k){k?(e.onAuthSuccess&&e.onAuthSuccess(),h.setSuccess(),j()):h.setSuccess()}).catch(function(k){h.setError(k)})}):e.updateToken(-1).then(function(){e.onAuthSuccess&&e.onAuthSuccess(),h.setSuccess()}).catch(function(k){e.onAuthError&&e.onAuthError(),r.onLoad?p():h.setError(k)})):r.onLoad?p():h.setSuccess():h.setSuccess()}function d(){var m=F(),k=function(){(document.readyState==="interactive"||document.readyState==="complete")&&(document.removeEventListener("readystatechange",k),m.setSuccess())};return document.addEventListener("readystatechange",k),k(),m.promise}return a.then(function(){d().then(ee).then(u).catch(function(m){l.setError(m)})}),a.catch(function(m){l.setError(m)}),l.promise},e.login=function(r){return f.login(r)};function y(r){var o=null,l=window.crypto||window.msCrypto;if(l&&l.getRandomValues&&window.Uint8Array)return o=new Uint8Array(r),l.getRandomValues(o),o;o=new Array(r);for(var h=0;h<o.length;h++)o[h]=Math.floor(256*Math.random());return o}function H(r){return _(r,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789")}function _(r,o){for(var l=y(r),h=new Array(r),a=0;a<r;a++)h[a]=o.charCodeAt(l[a]%o.length);return String.fromCharCode.apply(null,h)}function R(r,o){switch(r){case"S256":var l=new Uint8Array(sha256.arrayBuffer(o)),h=base64Js.fromByteArray(l).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"");return h;default:throw"Invalid value for pkceMethod"}}function I(r){var o={id_token:{acr:r}};return JSON.stringify(o)}e.createLoginUrl=function(r){var o=G(),l=G(),h=f.redirectUri(r),a={state:o,nonce:l,redirectUri:encodeURIComponent(h)};r&&r.prompt&&(a.prompt=r.prompt);var p;r&&r.action=="register"?p=e.endpoints.register():p=e.endpoints.authorize();var u=r&&r.scope||e.scope;u?u.indexOf("openid")===-1&&(u="openid "+u):u="openid";var d=p+"?client_id="+encodeURIComponent(e.clientId)+"&redirect_uri="+encodeURIComponent(h)+"&state="+encodeURIComponent(o)+"&response_mode="+encodeURIComponent(e.responseMode)+"&response_type="+encodeURIComponent(e.responseType)+"&scope="+encodeURIComponent(u);if(g&&(d=d+"&nonce="+encodeURIComponent(l)),r&&r.prompt&&(d+="&prompt="+encodeURIComponent(r.prompt)),r&&r.maxAge&&(d+="&max_age="+encodeURIComponent(r.maxAge)),r&&r.loginHint&&(d+="&login_hint="+encodeURIComponent(r.loginHint)),r&&r.idpHint&&(d+="&kc_idp_hint="+encodeURIComponent(r.idpHint)),r&&r.action&&r.action!="register"&&(d+="&kc_action="+encodeURIComponent(r.action)),r&&r.locale&&(d+="&ui_locales="+encodeURIComponent(r.locale)),r&&r.acr){var m=I(r.acr);d+="&claims="+encodeURIComponent(m)}if(e.pkceMethod){var k=H(96);a.pkceCodeVerifier=k;var S=R(e.pkceMethod,k);d+="&code_challenge="+S,d+="&code_challenge_method="+e.pkceMethod}return v.add(a),d},e.logout=function(r){return f.logout(r)},e.createLogoutUrl=function(r){var o=e.endpoints.logout()+"?client_id="+encodeURIComponent(e.clientId)+"&post_logout_redirect_uri="+encodeURIComponent(f.redirectUri(r,!1));return e.idToken&&(o+="&id_token_hint="+encodeURIComponent(e.idToken)),o},e.register=function(r){return f.register(r)},e.createRegisterUrl=function(r){return r||(r={}),r.action="register",e.createLoginUrl(r)},e.createAccountUrl=function(r){var o=E(),l=void 0;return typeof o<"u"&&(l=o+"/account?referrer="+encodeURIComponent(e.clientId)+"&referrer_uri="+encodeURIComponent(f.redirectUri(r))),l},e.accountManagement=function(){return f.accountManagement()},e.hasRealmRole=function(r){var o=e.realmAccess;return!!o&&o.roles.indexOf(r)>=0},e.hasResourceRole=function(r,o){if(!e.resourceAccess)return!1;var l=e.resourceAccess[o||e.clientId];return!!l&&l.roles.indexOf(r)>=0},e.loadUserProfile=function(){var r=E()+"/account",o=new XMLHttpRequest;o.open("GET",r,!0),o.setRequestHeader("Accept","application/json"),o.setRequestHeader("Authorization","bearer "+e.token);var l=F();return o.onreadystatechange=function(){o.readyState==4&&(o.status==200?(e.profile=JSON.parse(o.responseText),l.setSuccess(e.profile)):l.setError())},o.send(),l.promise},e.loadUserInfo=function(){var r=e.endpoints.userinfo(),o=new XMLHttpRequest;o.open("GET",r,!0),o.setRequestHeader("Accept","application/json"),o.setRequestHeader("Authorization","bearer "+e.token);var l=F();return o.onreadystatechange=function(){o.readyState==4&&(o.status==200?(e.userInfo=JSON.parse(o.responseText),l.setSuccess(e.userInfo)):l.setError())},o.send(),l.promise},e.isTokenExpired=function(r){if(!e.tokenParsed||!e.refreshToken&&e.flow!="implicit")throw"Not authenticated";if(e.timeSkew==null)return w("[KEYCLOAK] Unable to determine if token is expired as timeskew is not set"),!0;var o=e.tokenParsed.exp-Math.ceil(new Date().getTime()/1e3)+e.timeSkew;if(r){if(isNaN(r))throw"Invalid minValidity";o-=r}return o<0},e.updateToken=function(r){var o=F();if(!e.refreshToken)return o.setError(),o.promise;r=r||5;var l=function(){var a=!1;if(r==-1?(a=!0,w("[KEYCLOAK] Refreshing token: forced refresh")):(!e.tokenParsed||e.isTokenExpired(r))&&(a=!0,w("[KEYCLOAK] Refreshing token: token expired")),!a)o.setSuccess(!1);else{var p="grant_type=refresh_token&refresh_token="+e.refreshToken,u=e.endpoints.token();if(s.push(o),s.length==1){var d=new XMLHttpRequest;d.open("POST",u,!0),d.setRequestHeader("Content-type","application/x-www-form-urlencoded"),d.withCredentials=!0,p+="&client_id="+encodeURIComponent(e.clientId);var m=new Date().getTime();d.onreadystatechange=function(){if(d.readyState==4)if(d.status==200){w("[KEYCLOAK] Token refreshed"),m=(m+new Date().getTime())/2;var k=JSON.parse(d.responseText);B(k.access_token,k.refresh_token,k.id_token,m),e.onAuthRefreshSuccess&&e.onAuthRefreshSuccess();for(var S=s.pop();S!=null;S=s.pop())S.setSuccess(!0)}else{A("[KEYCLOAK] Failed to refresh token"),d.status==400&&e.clearToken(),e.onAuthRefreshError&&e.onAuthRefreshError();for(var S=s.pop();S!=null;S=s.pop())S.setError(!0)}},d.send(p)}}};if(n.enable){var h=O();h.then(function(){l()}).catch(function(a){o.setError(a)})}else l();return o.promise},e.clearToken=function(){e.token&&(B(null,null,null),e.onAuthLogout&&e.onAuthLogout(),e.loginRequired&&e.login())};function E(){if(typeof e.authServerUrl<"u")return e.authServerUrl.charAt(e.authServerUrl.length-1)=="/"?e.authServerUrl+"realms/"+encodeURIComponent(e.realm):e.authServerUrl+"/realms/"+encodeURIComponent(e.realm)}function N(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}function U(r,o){var l=r.code,h=r.error,a=r.prompt,p=new Date().getTime();if(r.kc_action_status&&e.onActionUpdate&&e.onActionUpdate(r.kc_action_status),h){if(a!="none"){var u={error:h,error_description:r.error_description};e.onAuthError&&e.onAuthError(u),o&&o.setError(u)}else o&&o.setSuccess();return}else e.flow!="standard"&&(r.access_token||r.id_token)&&S(r.access_token,null,r.id_token,!0);if(e.flow!="implicit"&&l){var d="code="+l+"&grant_type=authorization_code",m=e.endpoints.token(),k=new XMLHttpRequest;k.open("POST",m,!0),k.setRequestHeader("Content-type","application/x-www-form-urlencoded"),d+="&client_id="+encodeURIComponent(e.clientId),d+="&redirect_uri="+r.redirectUri,r.pkceCodeVerifier&&(d+="&code_verifier="+r.pkceCodeVerifier),k.withCredentials=!0,k.onreadystatechange=function(){if(k.readyState==4)if(k.status==200){var b=JSON.parse(k.responseText);S(b.access_token,b.refresh_token,b.id_token,e.flow==="standard"),j()}else e.onAuthError&&e.onAuthError(),o&&o.setError()},k.send(d)}function S(b,T,L,C){p=(p+new Date().getTime())/2,B(b,T,L,p),g&&(e.tokenParsed&&e.tokenParsed.nonce!=r.storedNonce||e.refreshTokenParsed&&e.refreshTokenParsed.nonce!=r.storedNonce||e.idTokenParsed&&e.idTokenParsed.nonce!=r.storedNonce)?(w("[KEYCLOAK] Invalid nonce, clearing token"),e.clearToken(),o&&o.setError()):C&&(e.onAuthSuccess&&e.onAuthSuccess(),o&&o.setSuccess())}}function M(r){var o=F(),l;t?typeof t=="string"&&(l=t):l="keycloak.json";function h(k){k?e.endpoints={authorize:function(){return k.authorization_endpoint},token:function(){return k.token_endpoint},logout:function(){if(!k.end_session_endpoint)throw"Not supported by the OIDC server";return k.end_session_endpoint},checkSessionIframe:function(){if(!k.check_session_iframe)throw"Not supported by the OIDC server";return k.check_session_iframe},register:function(){throw'Redirection to "Register user" page not supported in standard OIDC mode'},userinfo:function(){if(!k.userinfo_endpoint)throw"Not supported by the OIDC server";return k.userinfo_endpoint}}:e.endpoints={authorize:function(){return E()+"/protocol/openid-connect/auth"},token:function(){return E()+"/protocol/openid-connect/token"},logout:function(){return E()+"/protocol/openid-connect/logout"},checkSessionIframe:function(){var S=E()+"/protocol/openid-connect/login-status-iframe.html";return e.iframeVersion&&(S=S+"?version="+e.iframeVersion),S},thirdPartyCookiesIframe:function(){var S=E()+"/protocol/openid-connect/3p-cookies/step1.html";return e.iframeVersion&&(S=S+"?version="+e.iframeVersion),S},register:function(){return E()+"/protocol/openid-connect/registrations"},userinfo:function(){return E()+"/protocol/openid-connect/userinfo"}}}if(l){var a=new XMLHttpRequest;a.open("GET",l,!0),a.setRequestHeader("Accept","application/json"),a.onreadystatechange=function(){if(a.readyState==4)if(a.status==200||W(a)){var k=JSON.parse(a.responseText);e.authServerUrl=k["auth-server-url"],e.realm=k.realm,e.clientId=k.resource,h(null),o.setSuccess()}else o.setError()},a.send()}else{if(!t.clientId)throw"clientId missing";e.clientId=t.clientId;var p=t.oidcProvider;if(p)if(typeof p=="string"){var m;p.charAt(p.length-1)=="/"?m=p+".well-known/openid-configuration":m=p+"/.well-known/openid-configuration";var a=new XMLHttpRequest;a.open("GET",m,!0),a.setRequestHeader("Accept","application/json"),a.onreadystatechange=function(){if(a.readyState==4)if(a.status==200||W(a)){var S=JSON.parse(a.responseText);h(S),o.setSuccess()}else o.setError()},a.send()}else h(p),o.setSuccess();else{if(!t.url){for(var u=document.getElementsByTagName("script"),d=0;d<u.length;d++)if(u[d].src.match(/.*keycloak\.js/)){t.url=u[d].src.substr(0,u[d].src.indexOf("/js/keycloak.js"));break}}if(!t.realm)throw"realm missing";e.authServerUrl=t.url,e.realm=t.realm,h(null),o.setSuccess()}}return o.promise}function W(r){return r.status==0&&r.responseText&&r.responseURL.startsWith("file:")}function B(r,o,l,h){if(e.tokenTimeoutHandle&&(clearTimeout(e.tokenTimeoutHandle),e.tokenTimeoutHandle=null),o?(e.refreshToken=o,e.refreshTokenParsed=V(o)):(delete e.refreshToken,delete e.refreshTokenParsed),l?(e.idToken=l,e.idTokenParsed=V(l)):(delete e.idToken,delete e.idTokenParsed),r){if(e.token=r,e.tokenParsed=V(r),e.sessionId=e.tokenParsed.session_state,e.authenticated=!0,e.subject=e.tokenParsed.sub,e.realmAccess=e.tokenParsed.realm_access,e.resourceAccess=e.tokenParsed.resource_access,h&&(e.timeSkew=Math.floor(h/1e3)-e.tokenParsed.iat),e.timeSkew!=null&&(w("[KEYCLOAK] Estimated time difference between browser and server is "+e.timeSkew+" seconds"),e.onTokenExpired)){var a=(e.tokenParsed.exp-new Date().getTime()/1e3+e.timeSkew)*1e3;w("[KEYCLOAK] Token expires in "+Math.round(a/1e3)+" s"),a<=0?e.onTokenExpired():e.tokenTimeoutHandle=setTimeout(e.onTokenExpired,a)}}else delete e.token,delete e.tokenParsed,delete e.subject,delete e.realmAccess,delete e.resourceAccess,e.authenticated=!1}function V(r){switch(r=r.split(".")[1],r=r.replace(/-/g,"+"),r=r.replace(/_/g,"/"),r.length%4){case 0:break;case 2:r+="==";break;case 3:r+="=";break;default:throw"Invalid token"}return r=decodeURIComponent(escape(atob(r))),r=JSON.parse(r),r}function G(){var r="0123456789abcdef",o=_(36,r).split("");o[14]="4",o[19]=r.substr(o[19]&3|8,1),o[8]=o[13]=o[18]=o[23]="-";var l=o.join("");return l}function X(r){var o=Q(r);if(o){var l=v.get(o.state);return l&&(o.valid=!0,o.redirectUri=l.redirectUri,o.storedNonce=l.nonce,o.prompt=l.prompt,o.pkceCodeVerifier=l.pkceCodeVerifier),o}}function Q(r){var o;switch(e.flow){case"standard":o=["code","state","session_state","kc_action_status","iss"];break;case"implicit":o=["access_token","token_type","id_token","state","session_state","expires_in","kc_action_status","iss"];break;case"hybrid":o=["access_token","token_type","id_token","code","state","session_state","expires_in","kc_action_status","iss"];break}o.push("error"),o.push("error_description"),o.push("error_uri");var l=r.indexOf("?"),h=r.indexOf("#"),a,p;if(e.responseMode==="query"&&l!==-1?(a=r.substring(0,l),p=q(r.substring(l+1,h!==-1?h:r.length),o),p.paramsString!==""&&(a+="?"+p.paramsString),h!==-1&&(a+=r.substring(h))):e.responseMode==="fragment"&&h!==-1&&(a=r.substring(0,h),p=q(r.substring(h+1),o),p.paramsString!==""&&(a+="#"+p.paramsString)),p&&p.oauthParams){if(e.flow==="standard"||e.flow==="hybrid"){if((p.oauthParams.code||p.oauthParams.error)&&p.oauthParams.state)return p.oauthParams.newUrl=a,p.oauthParams}else if(e.flow==="implicit"&&(p.oauthParams.access_token||p.oauthParams.error)&&p.oauthParams.state)return p.oauthParams.newUrl=a,p.oauthParams}}function q(r,o){for(var l=r.split("&"),h={paramsString:"",oauthParams:{}},a=0;a<l.length;a++){var p=l[a].indexOf("="),u=l[a].slice(0,p);o.indexOf(u)!==-1?h.oauthParams[u]=l[a].slice(p+1):(h.paramsString!==""&&(h.paramsString+="&"),h.paramsString+=l[a])}return h}function F(){var r={setSuccess:function(o){r.resolve(o)},setError:function(o){r.reject(o)}};return r.promise=new Promise(function(o,l){r.resolve=o,r.reject=l}),r}function Z(r,o,l){var h=null,a=new Promise(function(p,u){h=setTimeout(function(){u({error:l||"Promise is not settled within timeout of "+o+"ms"})},o)});return Promise.race([r,a]).finally(function(){clearTimeout(h)})}function D(){var r=F();if(!n.enable||n.iframe)return r.setSuccess(),r.promise;var o=document.createElement("iframe");n.iframe=o,o.onload=function(){var a=e.endpoints.authorize();a.charAt(0)==="/"?n.iframeOrigin=N():n.iframeOrigin=a.substring(0,a.indexOf("/",8)),r.setSuccess()};var l=e.endpoints.checkSessionIframe();o.setAttribute("src",l),o.setAttribute("sandbox","allow-scripts allow-same-origin"),o.setAttribute("title","keycloak-session-iframe"),o.style.display="none",document.body.appendChild(o);var h=function(a){if(!(a.origin!==n.iframeOrigin||n.iframe.contentWindow!==a.source)&&(a.data=="unchanged"||a.data=="changed"||a.data=="error")){a.data!="unchanged"&&e.clearToken();for(var p=n.callbackList.splice(0,n.callbackList.length),u=p.length-1;u>=0;--u){var d=p[u];a.data=="error"?d.setError():d.setSuccess(a.data=="unchanged")}}};return window.addEventListener("message",h,!1),r.promise}function j(){n.enable&&e.token&&setTimeout(function(){O().then(function(r){r&&j()})},n.interval*1e3)}function O(){var r=F();if(n.iframe&&n.iframeOrigin){var o=e.clientId+" "+(e.sessionId?e.sessionId:"");n.callbackList.push(r);var l=n.iframeOrigin;n.callbackList.length==1&&n.iframe.contentWindow.postMessage(o,l)}else r.setSuccess();return r.promise}function ee(){var r=F();if(n.enable||e.silentCheckSsoRedirectUri){var o=document.createElement("iframe");o.setAttribute("src",e.endpoints.thirdPartyCookiesIframe()),o.setAttribute("sandbox","allow-scripts allow-same-origin"),o.setAttribute("title","keycloak-3p-check-iframe"),o.style.display="none",document.body.appendChild(o);var l=function(h){o.contentWindow===h.source&&(h.data!=="supported"&&h.data!=="unsupported"||(h.data==="unsupported"&&(A(`[KEYCLOAK] Your browser is blocking access to 3rd-party cookies, this means:

 - It is not possible to retrieve tokens without redirecting to the Keycloak server (a.k.a. no support for silent authentication).
 - It is not possible to automatically detect changes to the session status (such as the user logging out in another tab).

For more information see: https://www.keycloak.org/docs/latest/securing_apps/#_modern_browsers`),n.enable=!1,e.silentCheckSsoFallback&&(e.silentCheckSsoRedirectUri=!1)),document.body.removeChild(o),window.removeEventListener("message",l),r.setSuccess()))};window.addEventListener("message",l,!1)}else r.setSuccess();return Z(r.promise,e.messageReceiveTimeout,"Timeout when waiting for 3rd party check iframe message.")}function J(r){if(!r||r=="default")return{login:function(u){return window.location.assign(e.createLoginUrl(u)),F().promise},logout:function(u){return window.location.replace(e.createLogoutUrl(u)),F().promise},register:function(u){return window.location.assign(e.createRegisterUrl(u)),F().promise},accountManagement:function(){var u=e.createAccountUrl();if(typeof u<"u")window.location.href=u;else throw"Not supported by the OIDC server";return F().promise},redirectUri:function(u,d){return u&&u.redirectUri?u.redirectUri:e.redirectUri?e.redirectUri:location.href}};if(r=="cordova"){n.enable=!1;var o=function(u,d,m){return window.cordova&&window.cordova.InAppBrowser?window.cordova.InAppBrowser.open(u,d,m):window.open(u,d,m)},l=function(u){return u&&u.cordovaOptions?Object.keys(u.cordovaOptions).reduce(function(d,m){return d[m]=u.cordovaOptions[m],d},{}):{}},h=function(u){return Object.keys(u).reduce(function(d,m){return d.push(m+"="+u[m]),d},[]).join(",")},a=function(u){var d=l(u);return d.location="no",u&&u.prompt=="none"&&(d.hidden="yes"),h(d)},p=e.redirectUri||"http://localhost";return{login:function(u){var d=F(),m=a(u),k=e.createLoginUrl(u),S=o(k,"_blank",m),b=!1,T=!1,L=function(){T=!0,S.close()};return S.addEventListener("loadstart",function(C){if(C.url.indexOf(p)==0){var P=X(C.url);U(P,d),L(),b=!0}}),S.addEventListener("loaderror",function(C){if(!b)if(C.url.indexOf(p)==0){var P=X(C.url);U(P,d),L(),b=!0}else d.setError(),L()}),S.addEventListener("exit",function(C){T||d.setError({reason:"closed_by_user"})}),d.promise},logout:function(u){var d=F(),m=e.createLogoutUrl(u),k=o(m,"_blank","location=no,hidden=yes,clearcache=yes"),S;return k.addEventListener("loadstart",function(b){b.url.indexOf(p)==0&&k.close()}),k.addEventListener("loaderror",function(b){b.url.indexOf(p)==0||(S=!0),k.close()}),k.addEventListener("exit",function(b){S?d.setError():(e.clearToken(),d.setSuccess())}),d.promise},register:function(u){var d=F(),m=e.createRegisterUrl(),k=a(u),S=o(m,"_blank",k);return S.addEventListener("loadstart",function(b){if(b.url.indexOf(p)==0){S.close();var T=X(b.url);U(T,d)}}),d.promise},accountManagement:function(){var u=e.createAccountUrl();if(typeof u<"u"){var d=o(u,"_blank","location=no");d.addEventListener("loadstart",function(m){m.url.indexOf(p)==0&&d.close()})}else throw"Not supported by the OIDC server"},redirectUri:function(u){return p}}}if(r=="cordova-native")return n.enable=!1,{login:function(u){var d=F(),m=e.createLoginUrl(u);return universalLinks.subscribe("keycloak",function(k){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close();var S=X(k.url);U(S,d)}),window.cordova.plugins.browsertab.openUrl(m),d.promise},logout:function(u){var d=F(),m=e.createLogoutUrl(u);return universalLinks.subscribe("keycloak",function(k){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close(),e.clearToken(),d.setSuccess()}),window.cordova.plugins.browsertab.openUrl(m),d.promise},register:function(u){var d=F(),m=e.createRegisterUrl(u);return universalLinks.subscribe("keycloak",function(k){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close();var S=X(k.url);U(S,d)}),window.cordova.plugins.browsertab.openUrl(m),d.promise},accountManagement:function(){var u=e.createAccountUrl();if(typeof u<"u")window.cordova.plugins.browsertab.openUrl(u);else throw"Not supported by the OIDC server"},redirectUri:function(u){return u&&u.redirectUri?u.redirectUri:e.redirectUri?e.redirectUri:"http://localhost"}};throw"invalid adapter type: "+r}var Y=function(){if(!(this instanceof Y))return new Y;localStorage.setItem("kc-test","test"),localStorage.removeItem("kc-test");var r=this;function o(){for(var l=new Date().getTime(),h=0;h<localStorage.length;h++){var a=localStorage.key(h);if(a&&a.indexOf("kc-callback-")==0){var p=localStorage.getItem(a);if(p)try{var u=JSON.parse(p).expires;(!u||u<l)&&localStorage.removeItem(a)}catch{localStorage.removeItem(a)}}}}r.get=function(l){if(l){var h="kc-callback-"+l,a=localStorage.getItem(h);return a&&(localStorage.removeItem(h),a=JSON.parse(a)),o(),a}},r.add=function(l){o();var h="kc-callback-"+l.state;l.expires=new Date().getTime()+60*60*1e3,localStorage.setItem(h,JSON.stringify(l))}},z=function(){if(!(this instanceof z))return new z;var r=this;r.get=function(a){if(a){var p=l("kc-callback-"+a);if(h("kc-callback-"+a,"",o(-100)),p)return JSON.parse(p)}},r.add=function(a){h("kc-callback-"+a.state,JSON.stringify(a),o(60))},r.removeItem=function(a){h(a,"",o(-100))};var o=function(a){var p=new Date;return p.setTime(p.getTime()+a*60*1e3),p},l=function(a){for(var p=a+"=",u=document.cookie.split(";"),d=0;d<u.length;d++){for(var m=u[d];m.charAt(0)==" ";)m=m.substring(1);if(m.indexOf(p)==0)return m.substring(p.length,m.length)}return""},h=function(a,p,u){var d=a+"="+p+"; expires="+u.toUTCString()+"; ";document.cookie=d}};function re(){try{return new Y}catch{}return new z}function $(r){return function(){e.enableLogging&&r.apply(console,Array.prototype.slice.call(arguments))}}}const storeAuth=useAuthStore(),keycloak=new Keycloak({url:"https://sso.cubevn-service.com/",realm:"test",clientId:"all-test-client"});keycloak.init({onLoad:"login_required",checkLoginIframe:!1,redirectUri:"http://localhost:3000/check-sso"}).then(async t=>{var f,s,v;if(t&&keycloak.token&&(localStorage.setItem("token",keycloak.token),localStorage.setItem("refresh_token",keycloak.refreshToken),await keycloak.loadUserInfo(),console.log(keycloak.userInfo),(f=keycloak.userInfo)!=null&&f.employeeID)){var e=(s=keycloak.userInfo)==null?void 0:s.employeeID.length;storeAuth.login(("0"+((v=keycloak.userInfo)==null?void 0:v.employeeID)).substring(e-3,e+1),"","SSO")}});const _withScopeId=t=>(pushScopeId("data-v-d49a3f22"),t=t(),popScopeId(),t),_hoisted_1={class:"bg-screen"},_hoisted_2={class:"container"},_hoisted_3=_withScopeId(()=>createBaseVNode("div",{class:"img-banner"},null,-1)),_hoisted_4=_withScopeId(()=>createBaseVNode("div",{class:"logo-csv"},null,-1)),_hoisted_5=_withScopeId(()=>createBaseVNode("img",{src:_imports_0,alt:"",class:"logo-csv"},null,-1)),_hoisted_6=_withScopeId(()=>createBaseVNode("h1",{class:"footer-txt"},"Cube System VN Co., Ltd",-1)),_sfc_main=defineComponent({__name:"login",setup(t){const{t:e}=useI18n(),f=useAuthStore(),s=ref(!1),v=create$3().shape({account:create$6().required(()=>MSG_120002),password:create$6().required(()=>MSG_120002)}),{handleSubmit:n}=useForm({validationSchema:v}),x=useField("account",v),c=useField("password",v),g=n(async A=>{f.login(A.account,A.password,A.type)}),w=async()=>{keycloak.login()};return(A,y)=>{const H=resolveComponent("v-text-field"),_=resolveComponent("v-btn");return openBlock(),createElementBlock("div",_hoisted_1,[createBaseVNode("div",_hoisted_2,[_hoisted_3,createVNode(flagLanguage),_hoisted_4,_hoisted_5,createBaseVNode("form",{class:"form-login",onSubmit:y[4]||(y[4]=withModifiers((...R)=>unref(g)&&unref(g)(...R),["prevent"]))},[createVNode(H,{label:unref(e)("common.account"),class:"login-input",modelValue:unref(x).value.value,"onUpdate:modelValue":y[0]||(y[0]=R=>unref(x).value.value=R),"error-messages":unref(x).errorMessage.value?unref(e)("messages."+unref(x).errorMessage.value):""},null,8,["label","modelValue","error-messages"]),createVNode(H,{label:unref(e)("common.password"),class:"login-input mt-6",type:s.value?"text":"password",modelValue:unref(c).value.value,"onUpdate:modelValue":y[1]||(y[1]=R=>unref(c).value.value=R),"error-messages":unref(c).errorMessage.value?unref(e)("messages."+unref(c).errorMessage.value):"","append-inner-icon":s.value?"mdi-eye":"mdi-eye-off",onMousedown:y[2]||(y[2]=()=>s.value=!0),onMouseup:y[3]||(y[3]=()=>s.value=!1)},null,8,["label","type","modelValue","error-messages","append-inner-icon"]),createVNode(_,{loading:unref(f).isLoading,color:"primary",type:"submit",class:"login-btn w-full rounded-md mt-6"},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(e)("common.sign_in")),1)]),_:1},8,["loading"]),createVNode(_,{class:"login-btn rounded-md mt-6 sso-btn",onClick:w},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(e)("common.sign_in_sso")),1)]),_:1})],32)]),_hoisted_6])}}}),login_scss_vue_type_style_index_0_src_d49a3f22_scoped_d49a3f22_lang="",login=_export_sfc(_sfc_main,[["__scopeId","data-v-d49a3f22"]]);export{login as default};
